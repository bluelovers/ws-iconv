"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const internal_1 = require("./lib/internal");
class ReadStream extends fs.ReadStream {
    constructor(path, options) {
        // @ts-ignore
        super(path, options);
        internal_1.getFsStreamData(this);
    }
    static get create() {
        return createReadStream;
    }
    open() {
        if (typeof internal_1.getFsStreamData(this) !== 'boolean') {
            this[internal_1.SYM_FS_STREAM_DATA].opened = true;
            // @ts-ignore
            fs.ReadStream.prototype.open.call(this);
        }
    }
}
exports.ReadStream = ReadStream;
function createReadStream(path, options) {
    return new ReadStream(path, options);
}
exports.createReadStream = createReadStream;
exports.default = ReadStream;
// @ts-ignore
Object.freeze(exports);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5QkFBMEI7QUFFMUIsNkNBQXFFO0FBRXJFLE1BQWEsVUFBVyxTQUFRLEVBQUUsQ0FBQyxVQUFVO0lBaUI1QyxZQUFZLElBQWMsRUFBRSxPQUF3QztRQUVuRSxhQUFhO1FBQ2IsS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUVwQiwwQkFBZSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxNQUFNLEtBQUssTUFBTTtRQUVoQixPQUFPLGdCQUFnQixDQUFBO0lBQ3hCLENBQUM7SUFFRCxJQUFJO1FBRUgsSUFBSSxPQUFPLDBCQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxFQUM5QztZQUNDLElBQUksQ0FBQyw2QkFBa0IsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUE7WUFDdEMsYUFBYTtZQUNiLEVBQUUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDdkM7SUFDRixDQUFDO0NBQ0Q7QUF2Q0QsZ0NBdUNDO0FBRUQsU0FBZ0IsZ0JBQWdCLENBQUMsSUFBYyxFQUFFLE9BQXVDO0lBRXZGLE9BQU8sSUFBSSxVQUFVLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0FBQ3JDLENBQUM7QUFIRCw0Q0FHQztBQUVELGtCQUFlLFVBQVUsQ0FBQTtBQUN6QixhQUFhO0FBQ2IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhdGhMaWtlIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgZnMgPSByZXF1aXJlKCdmcycpO1xuaW1wb3J0IHsgSUZzUmVhZFN0cmVhbU9wdGlvbnMsIElGc1N0cmVhbURhdGEsIElGc1N0cmVhbVN0YXRlLCBJRnNXcml0ZVN0cmVhbU9wdGlvbnMgfSBmcm9tICcuL2xpYi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZ2V0RnNTdHJlYW1EYXRhLCBTWU1fRlNfU1RSRUFNX0RBVEEgfSBmcm9tICcuL2xpYi9pbnRlcm5hbCc7XG5cbmV4cG9ydCBjbGFzcyBSZWFkU3RyZWFtIGV4dGVuZHMgZnMuUmVhZFN0cmVhbVxue1xuXHRwcm90ZWN0ZWQgYXV0b0Nsb3NlOiBib29sZWFuXG5cdHByb3RlY3RlZCBmbGFnczogc3RyaW5nXG5cdGZkOiBudW1iZXJcblx0cHJvdGVjdGVkIG1vZGU6IG51bWJlclxuXHRwcm90ZWN0ZWQgcG9zOiBudW1iZXJcblx0cHJvdGVjdGVkIGNsb3NlZDogYm9vbGVhblxuXHRwcm90ZWN0ZWQgZGVzdHJveWVkOiBib29sZWFuXG5cblx0cHJvdGVjdGVkIF93cml0YWJsZVN0YXRlOiBJRnNTdHJlYW1TdGF0ZVxuXHRwcm90ZWN0ZWQgX3JlYWRhYmxlU3RhdGU6IElGc1N0cmVhbVN0YXRlXG5cblx0cHJvdGVjdGVkIFtTWU1fRlNfU1RSRUFNX0RBVEFdOiBJRnNTdHJlYW1EYXRhXG5cblx0cHJvdGVjdGVkIGVuZDogbnVtYmVyXG5cblx0Y29uc3RydWN0b3IocGF0aDogUGF0aExpa2UsIG9wdGlvbnM/OiBzdHJpbmcgfCBJRnNXcml0ZVN0cmVhbU9wdGlvbnMpXG5cdHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0c3VwZXIocGF0aCwgb3B0aW9ucylcblxuXHRcdGdldEZzU3RyZWFtRGF0YSh0aGlzKVxuXHR9XG5cblx0c3RhdGljIGdldCBjcmVhdGUoKVxuXHR7XG5cdFx0cmV0dXJuIGNyZWF0ZVJlYWRTdHJlYW1cblx0fVxuXG5cdG9wZW4oKVxuXHR7XG5cdFx0aWYgKHR5cGVvZiBnZXRGc1N0cmVhbURhdGEodGhpcykgIT09ICdib29sZWFuJylcblx0XHR7XG5cdFx0XHR0aGlzW1NZTV9GU19TVFJFQU1fREFUQV0ub3BlbmVkID0gdHJ1ZVxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0ZnMuUmVhZFN0cmVhbS5wcm90b3R5cGUub3Blbi5jYWxsKHRoaXMpXG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWFkU3RyZWFtKHBhdGg6IFBhdGhMaWtlLCBvcHRpb25zPzogc3RyaW5nIHwgSUZzUmVhZFN0cmVhbU9wdGlvbnMpXG57XG5cdHJldHVybiBuZXcgUmVhZFN0cmVhbShwYXRoLCBvcHRpb25zKVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWFkU3RyZWFtXG4vLyBAdHMtaWdub3JlXG5PYmplY3QuZnJlZXplKGV4cG9ydHMpXG4iXX0=